---
layout: default
title: Map
---

<a href="#" onClick="showDisruptionMarkers()" class="btn btn-md btn-outline-secondary">Show Disruptions</a>
<a href="#" onClick="hideDisruptionMarkers()" class="btn btn-md btn-outline-secondary">Hide Disruptions</a>

<div id="failureMap" style="height:600px;"></div>

<script>
  let map = L.map('failureMap').setView([47.320788, 8.064205], 11);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  let latlngs = [
    [47.30673582018146,8.05031330807258],
    [47.30809702928747,8.05063361789288],
    [47.30957344122759,8.05127060739907],
    [47.31091802115896,8.05127622168936],
    [47.31210882286143,8.05126324457229],
    [47.31386368110663,8.05176272691625],
    [47.31578581115923,8.05267703205103],
    [47.31754366324662,8.05253189263135],
    [47.31899997630777,8.05265964268196],
    [47.3198396038757,8.05282004922666],
    [47.32014101907607,8.05288291550981],
    [47.32095477803631,8.0530491311416],
    [47.32246862008699,8.05347456327568],
    [47.32415318883002,8.05404967276252],
    [47.32588773021185,8.05458738511436],
    [47.32788134010193,8.05457721461836],
    [47.3293198304607,8.05453436043397],
    [47.3298404956721,8.05455509413731],
    [47.33100595371387,8.05464721374064],
    [47.33277881691319,8.05447929743589],
    [47.33437258980015,8.05425402981157],
    [47.33550476572658,8.05424339223968],
    [47.33674529739524,8.05369142357477],
    [47.33799723131922,8.05355489223796],
    [47.33891113870513,8.05312735073321],
    [47.33918568031383,8.05299425550134],
    [47.33990873076037,8.0528935536384],
    [47.34109094638875,8.05327315960059],
    [47.34254331302941,8.05323848955326],
    [47.34371331022361,8.05257279758128],
    [47.34397526943035,8.05241229619851],
    [47.3450030270161,8.05176615616874],
    [47.34660018381647,8.05094245995317],
    [47.34837339519854,8.04994577621275],
    [47.35008431270265,8.04913198280035],
    [47.35142860883962,8.04821821610045],
    [47.35270674522961,8.04754108157486],
    [47.35393755369282,8.04702270316078],
    [47.35493785155821,8.0467429496125],
    [47.35556100040054,8.04653810043609],
    [47.35617659628527,8.04660228649943],
    [47.35657377072094,8.04670454341965],
    [47.35702191616622,8.04669336749925],
    [47.35806267358574,8.04634289251758],
    [47.35929369487501,8.04622087308634],
    [47.36063711968862,8.04625735470111],
    [47.36120217579578,8.04539122810928],
    [47.36142522014436,8.045011135045],
    [47.36235975517356,8.0434470016968],
    [47.36347331616328,8.04166455154443],
    [47.364565772623,8.04175006138238],
    [47.36496385106454,8.04245577058664],
    [47.36561207265341,8.0434090073843],
    [47.36685397121192,8.04413715548591],
    [47.36824380687276,8.04453656238103],
    [47.36910090995926,8.04449999132864],
    [47.36997403203275,8.04447823912567],
    [47.37093795019717,8.04561073186981],
    [47.37210974344551,8.04684068810407],
    [47.37344078905464,8.04805195422972],
    [47.37492424271611,8.04911976233187],
    [47.37588255752903,8.04938100715694],
    [47.37614034448476,8.04944408813717],
    [47.37726861200287,8.04971433724531],
    [47.37907055406035,8.0501624443085],
    [47.38097011478402,8.05063289718288],
    [47.38264015642211,8.0506761473405],
    [47.38361826507047,8.05054358070789],
    [47.38403937728627,8.05046226358082],
    [47.38546027275211,8.05016838867204],
    [47.38707611757317,8.04982560655162],
    [47.38842842693703,8.04990554057674],
    [47.3897291816811,8.05067430915012],
    [47.39055180725442,8.05167550074458],
    [47.39091401070633,8.05278460620167],
    [47.39102941437884,8.05319167729159],
    [47.39133862897466,8.05376661823295],
    [47.39177557351709,8.05466480927803],
    [47.39222167776447,8.05616240612538],
    [47.39280924783177,8.05891003068623],
    [47.39343199353953,8.06176844954462],
    [47.39373133211727,8.06474042092652],
    [47.39255269267865,8.06747513564097],
    [47.39081093872619,8.06877744358623],
    [47.38973686331783,8.06967515967098],
    [47.38918462071499,8.07018789630824],
    [47.38825132920788,8.07111623892363],
    [47.38681626380087,8.07266019186181],
    [47.38492302157893,8.07500759032985],
    [47.38299332584995,8.07789985433406],
    [47.38097802526742,8.08096714934507],
    [47.37899195965691,8.08396600146297],
    [47.37656434417264,8.08548955961722],
    [47.37391277775424,8.08552162917104],
    [47.37233003288645,8.0838212474109],
    [47.37127407630058,8.08230782467055],
    [47.37086664883684,8.08178478027889],
    [47.3703843009815,8.08120329291386],
    [47.36929657517122,8.08134833982215],
    [47.36849742934925,8.08292115077629],
    [47.36740509511122,8.08535333781406],
    [47.36589906319064,8.08828719866244],
    [47.36457556945048,8.09077068153954],
    [47.36391793239066,8.09236122136126],
    [47.36372198213525,8.09408954092021],
    [47.36322873993764,8.09648558959119],
    [47.3620739259143,8.09815141009207],
    [47.36164266084083,8.0990116426139],
    [47.36122173926172,8.09980041819902],
    [47.3599733201077,8.10201286968275],
    [47.35826484052326,8.10479809913339],
    [47.35666506214356,8.10638146397489],
    [47.35628906821943,8.10668895634117],
    [47.35544161514524,8.10737484107854],
    [47.35338756629394,8.10898009906772],
    [47.35081292521281,8.11092851838543],
    [47.34808187445391,8.11232004472354],
    [47.3454231148615,8.11279590033928],
    [47.34341423808999,8.11348473516597],
    [47.34134219995203,8.11413645529301],
    [47.33858125076442,8.11412315527626],
    [47.33575117958051,8.11344042632323],
    [47.33363319718907,8.11268545058387],
    [47.33195221483459,8.11359360006415],
    [47.3305649973982,8.11437409423302],
    [47.32955792305027,8.11446660267346],
    [47.32907564918396,8.11425733942914],
    [47.32812663824373,8.11388068132166],
    [47.32631160988453,8.11330388224988],
    [47.32404276486873,8.11313337451368],
    [47.32119447173499,8.11350936282343],
    [47.3183444693482,8.11280291896279],
    [47.31592666460143,8.11270755480122],
    [47.31463777568154,8.11303188521683],
    [47.31416070538434,8.11321466916002],
    [47.31318020166724,8.11356084967264],
    [47.31182000736646,8.11404643372371],
    [47.31057753988156,8.11474463551944],
    [47.30965067187173,8.11535035903028],
    [47.30880523384968,8.11574173427116],
    [47.30766738091358,8.11655596750647],
    [47.30646427723107,8.11760081557445],
    [47.30519584062286,8.11863327165807],
    [47.30339814368731,8.11992253602831],
    [47.3022874881008,8.12097163820935],
    [47.30100922510074,8.1227676547451],
    [47.29963971160309,8.12366313024339],
    [47.29881164280894,8.12408942388007],
    [47.29847226011616,8.12429240046183],
    [47.29746252958633,8.12491930130127],
    [47.29650129155437,8.12599804661712],
    [47.29500463328918,8.12691525160862],
    [47.29366109655721,8.12819975772474],
    [47.29230584639844,8.13048024733098],
    [47.29034018554388,8.1334609059607],
    [47.28817588620608,8.13625941819965],
    [47.28590450937242,8.13885111858115],
    [47.28350161691505,8.14043803649275],
    [47.28152676782504,8.14165397966492],
    [47.28040900122814,8.1428967272008],
    [47.28040781326494,8.14448075145275],
    [47.28058144034532,8.14493221927768],
    [47.28109986485167,8.1459148132441],
    [47.28242914590772,8.14696031639783],
    [47.28324206841565,8.14903631284007],
    [47.28320234252005,8.15109050461992],
    [47.2826418981432,8.15249188664811],
    [47.28221510821962,8.15321092755144],
    [47.28195666922045,8.15364667225015],
    [47.28092278023641,8.15522322224256],
    [47.27952464018738,8.15711230952733],
    [47.27776622291532,8.15948818289731],
    [47.27588602638598,8.16248326416715],
    [47.27459848458808,8.1652053517949],
    [47.27369217848405,8.16679204700081],
    [47.27310319352482,8.16766709455613],
    [47.27270986755017,8.16787571228317],
    [47.27227904758354,8.1680836591069],
    [47.27147231618843,8.16901624094871],
    [47.27034798019691,8.1708613525161],
    [47.26866853155505,8.17359479744894],
    [47.26656467445456,8.17642221606075],
    [47.26395860052357,8.17808216736521],
    [47.26127853551652,8.17941591747903],
    [47.25887182294873,8.18042979115173],
    [47.25734272431938,8.18140448320653],
    [47.25692286949249,8.18172216847051],
    [47.25580082011929,8.18252805989386],
    [47.25459831841017,8.1833527949083],
    [47.25422116969105,8.18361610250544],
    [47.25315794665116,8.18408995029801],
    [47.25143843953671,8.18435105043711],
    [47.25019889241107,8.18455266009042],
    [47.2497075201981,8.184626272724],
    [47.24832598586634,8.18531553790084],
    [47.24662640883412,8.18644350599011],
    [47.24483074443781,8.18762156520046],
    [47.24309813367947,8.18858959327674],
    [47.24201231922295,8.18897548505507],
    [47.24132572165443,8.18921018150488],
    [47.24075064211624,8.18941534393256]
  ];

  let polyline = L.polyline(latlngs, {color: 'black', smoothFactor: 0.25}).addTo(map);

  // zoom the map to the polyline
  map.fitBounds(polyline.getBounds());

  let disruptionData = [
    [47.30487034137401, 8.04946883884298, '2020-02-10 03:06:12', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30463778488183, 8.04936795918144, '2020-02-10 03:08:53', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30531711841573, 8.04966393509257, '2020-02-10 16:52:17', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24056912225743, 8.18948005268825, '2020-02-11 04:14:08', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24084052935401, 8.18938330065451, '2020-02-11 04:18:15', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24131088664542, 8.18921547476113, '2020-02-11 05:41:25', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.33493682322066, 8.11325197868008, '2020-02-11 12:58:04', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24097666261870, 8.18933472871057, '2020-02-11 15:50:13', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30533077177571, 8.04967051641620, '2020-02-11 19:36:38', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24134579254899, 8.18920302004056, '2020-02-12 03:59:49', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24111105034746, 8.18928677803638, '2020-02-12 04:18:35', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30638152548883, 8.05017091633066, '2020-02-12 06:35:41', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24096270025727, 8.18933971059880, '2020-02-12 16:34:30', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30556943422742, 8.04980767192201, '2020-02-13 03:51:47', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30546857950056, 8.04973896735244, '2020-02-13 03:59:12', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30639104455441, 8.05017479750375, '2020-02-13 16:56:00', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24051239907072, 8.18950028480275, '2020-02-14 04:01:27', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24078904054791, 8.18940165554194, '2020-02-14 04:05:03', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24135364637729, 8.18920021772843, '2020-02-14 05:45:49', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.31033155632842, 8.11501794497052, '2020-02-14 06:12:39', 'Stoerung: Linienleitertelegramme wurden erwartet, jedoch auf beiden Antennen keine empfangen.'],
    [47.24098364379941, 8.18933223776646, '2020-02-14 15:51:08', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.30531711841573, 8.04966393509257, '2020-02-14 19:37:04', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24134928313935, 8.18920177456850, '2020-02-15 04:17:45', 'Stoerung: Zwangsbremse wurde aktiviert'],
    [47.24112675800406, 8.18928117341213, '2020-02-15 04:20:30', 'Stoerung: Zwangsbremse wurde aktiviert']
  ];

  let disruptionMarkers = [];

  for (let disruption of disruptionData) {
    disruptionMarkers.push(
      L.marker([disruption[0], disruption[1]])
       .addTo(map)
       .bindPopup(`${disruption[3]}<br>Zeitpunkt: ${disruption[2]}`)
    )
  }

  let disruptionMarkersVisible = true;

  let hideDisruptionMarkers = function() {
    if (!disruptionMarkersVisible)
      return;

    for(let marker of disruptionMarkers) {
      marker.remove();
    }

    disruptionMarkersVisible = false;
  }

  let showDisruptionMarkers = function() {
    if (disruptionMarkersVisible)
      return;

    for(let marker of disruptionMarkers) {
      marker.addTo(map);
    }

    disruptionMarkersVisible = true;
  }
  
</script>
